<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFR.org Scavenger Hunt</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide icons as SVG components
        const CheckCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const Circle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" strokeWidth={2} />
            </svg>
        );

        const Trophy = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
            </svg>
        );

        const MapPin = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        );

        const ScavengerHunt = () => {
            const [completedChallenges, setCompletedChallenges] = useState({});
            const [startTime] = useState(Date.now());
            const [answers, setAnswers] = useState({});
            const [showHints, setShowHints] = useState({});

            const challenges = [
                {
                    id: 1,
                    category: "Getting Started",
                    description: "Navigate to the 'About' section and find when CFR was founded.",
                    hint: "Look for the About page in the main navigation",
                    answer: "1921",
                    points: 10,
                    url: "https://www.cfr.org/about"
                },
                {
                    id: 2,
                    category: "Publications",
                    description: "Locate CFR's flagship publication. What is it called?",
                    hint: "Check the main navigation or look for publications",
                    answer: "foreign affairs",
                    points: 10,
                    url: "https://www.cfr.org"
                },
                {
                    id: 3,
                    category: "Content Exploration",
                    description: "Find an article or analysis about a current global issue. What region or topic did you choose?",
                    hint: "Look for sections like 'Regions', 'Topics', or recent articles on the homepage",
                    answer: "open",
                    points: 15,
                    url: "https://www.cfr.org"
                },
                {
                    id: 4,
                    category: "Experts",
                    description: "Find the 'Experts' section. How many different expertise areas can you identify?",
                    hint: "Look for a section dedicated to CFR fellows and scholars",
                    answer: "open",
                    points: 15,
                    url: "https://www.cfr.org/experts"
                },
                {
                    id: 5,
                    category: "Multimedia",
                    description: "Find a video event or interview. What's the title?",
                    hint: "Look for Events, Videos, or Multimedia sections",
                    answer: "open",
                    points: 15,
                    url: "https://www.cfr.org"
                },
                {
                    id: 6,
                    category: "Deep Dive",
                    description: "Navigate to a topic page (like China, Climate, or Middle East). What helpful features do you notice?",
                    hint: "Topic pages aggregate content by subject",
                    answer: "open",
                    points: 20,
                    url: "https://www.cfr.org"
                },
                {
                    id: 7,
                    category: "Search & Discovery",
                    description: "Use the site's search feature to find content on a topic you're interested in. What did you search for?",
                    hint: "Look for a search icon or bar in the navigation",
                    answer: "open",
                    points: 15,
                    url: "https://www.cfr.org"
                }
            ];

            const handleAnswerChange = (challengeId, value) => {
                setAnswers({
                    ...answers,
                    [challengeId]: value
                });
            };

            const checkAnswer = (challenge) => {
                const userAnswer = answers[challenge.id]?.toLowerCase().trim();
                
                if (challenge.answer === "open") {
                    return userAnswer && userAnswer.length > 0;
                }
                
                return userAnswer === challenge.answer.toLowerCase();
            };

            const submitAnswer = (challenge) => {
                if (checkAnswer(challenge)) {
                    setCompletedChallenges({
                        ...completedChallenges,
                        [challenge.id]: true
                    });
                    setAnswers({
                        ...answers,
                        [challenge.id]: ''
                    });
                }
            };

            const toggleHint = (challengeId) => {
                setShowHints({
                    ...showHints,
                    [challengeId]: !showHints[challengeId]
                });
            };

            const totalPoints = challenges.reduce((sum, c) => 
                completedChallenges[c.id] ? sum + c.points : sum, 0
            );
            
            const maxPoints = challenges.reduce((sum, c) => sum + c.points, 0);
            const completedCount = Object.keys(completedChallenges).length;

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-3 sm:p-6">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-4 sm:p-6 mb-4 sm:mb-6">
                            <div className="flex items-center justify-between mb-4 gap-3">
                                <h1 className="text-xl sm:text-2xl md:text-3xl font-bold text-indigo-900">CFR.org Scavenger Hunt</h1>
                                <Trophy className="w-8 h-8 sm:w-10 sm:h-10 text-yellow-500 flex-shrink-0" />
                            </div>
                            <p className="text-gray-600 mb-4 text-sm sm:text-base">
                                Explore the Council on Foreign Relations website and complete challenges to learn about this premier foreign policy resource!
                            </p>
                            
                            <div className="grid grid-cols-3 gap-2 sm:gap-4 mt-4">
                                <div className="bg-indigo-50 rounded p-2 sm:p-3 text-center">
                                    <div className="text-lg sm:text-2xl font-bold text-indigo-600">{completedCount}/{challenges.length}</div>
                                    <div className="text-xs sm:text-sm text-gray-600">Completed</div>
                                </div>
                                <div className="bg-green-50 rounded p-2 sm:p-3 text-center">
                                    <div className="text-lg sm:text-2xl font-bold text-green-600">{totalPoints}/{maxPoints}</div>
                                    <div className="text-xs sm:text-sm text-gray-600">Points</div>
                                </div>
                                <div className="bg-purple-50 rounded p-2 sm:p-3 text-center">
                                    <div className="text-lg sm:text-2xl font-bold text-purple-600">
                                        {Math.round((totalPoints / maxPoints) * 100) || 0}%
                                    </div>
                                    <div className="text-xs sm:text-sm text-gray-600">Progress</div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-blue-50 border-l-4 border-blue-500 p-3 sm:p-4 mb-4 sm:mb-6 rounded">
                            <h3 className="font-bold text-blue-900 mb-2 text-sm sm:text-base">How to Play:</h3>
                            <ol className="text-xs sm:text-sm text-blue-800 space-y-1 list-decimal list-inside">
                                <li>Click on the CFR.org link for each challenge to visit the website</li>
                                <li>Complete the challenge by finding the information requested</li>
                                <li>Enter your answer in the input field</li>
                                <li>Click "Submit" to check your answer and earn points</li>
                                <li>Complete all challenges to become a CFR.org expert!</li>
                            </ol>
                        </div>

                        <div className="space-y-4">
                            {challenges.map((challenge) => {
                                const isCompleted = completedChallenges[challenge.id];
                                
                                return (
                                    <div 
                                        key={challenge.id}
                                        className={`bg-white rounded-lg shadow-md p-3 sm:p-5 transition-all ${
                                            isCompleted ? 'border-2 border-green-400' : 'border-2 border-transparent'
                                        }`}
                                    >
                                        <div className="flex items-start gap-2 sm:gap-4">
                                            <div className="flex-shrink-0 mt-1">
                                                {isCompleted ? (
                                                    <CheckCircle className="w-5 h-5 sm:w-6 sm:h-6 text-green-500" />
                                                ) : (
                                                    <Circle className="w-5 h-5 sm:w-6 sm:h-6 text-gray-300" />
                                                )}
                                            </div>
                                            
                                            <div className="flex-grow min-w-0">
                                                <div className="flex items-center justify-between mb-2 gap-2">
                                                    <div>
                                                        <span className="inline-block bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded mb-2">
                                                            {challenge.category}
                                                        </span>
                                                    </div>
                                                    <div className="text-right flex-shrink-0">
                                                        <div className="text-base sm:text-lg font-bold text-indigo-600">
                                                            {challenge.points} pts
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <p className="text-gray-700 mb-3 text-base sm:text-lg">{challenge.description}</p>
                                                
                                                {!isCompleted && (
                                                    <>
                                                        <button
                                                            onClick={() => toggleHint(challenge.id)}
                                                            className="text-xs sm:text-sm text-indigo-600 hover:text-indigo-800 mb-2 underline"
                                                        >
                                                            {showHints[challenge.id] ? '− Hide hint' : '+ Show hint'}
                                                        </button>
                                                        
                                                        {showHints[challenge.id] && (
                                                            <div className="bg-yellow-50 border border-yellow-200 rounded p-2 mb-3 text-xs sm:text-sm text-yellow-800">
                                                                <strong>Hint:</strong> {challenge.hint}
                                                            </div>
                                                        )}
                                                        
                                                        <div className="flex flex-col sm:flex-row gap-2 mb-3">
                                                            <input
                                                                type="text"
                                                                value={answers[challenge.id] || ''}
                                                                onChange={(e) => handleAnswerChange(challenge.id, e.target.value)}
                                                                placeholder="Enter your answer..."
                                                                className="flex-grow px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm sm:text-base"
                                                                onKeyPress={(e) => {
                                                                    if (e.key === 'Enter') {
                                                                        submitAnswer(challenge);
                                                                    }
                                                                }}
                                                            />
                                                            <button
                                                                onClick={() => submitAnswer(challenge)}
                                                                className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors text-sm sm:text-base whitespace-nowrap"
                                                            >
                                                                Submit
                                                            </button>
                                                        </div>
                                                        
                                                        <a
                                                            href={challenge.url}
                                                            target="_blank"
                                                            rel="noopener noreferrer"
                                                            className="inline-flex items-center gap-1 text-xs sm:text-sm text-blue-600 hover:text-blue-800 hover:underline"
                                                        >
                                                            <MapPin className="w-3 h-3 sm:w-4 sm:h-4" />
                                                            Visit CFR.org to find the answer
                                                        </a>
                                                    </>
                                                )}
                                                
                                                {isCompleted && (
                                                    <div className="bg-green-50 border border-green-200 rounded p-3 text-green-800 text-sm sm:text-base">
                                                        <strong>✓ Challenge completed!</strong> Great work exploring this section of CFR.org.
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>

                        {completedCount === challenges.length && (
                            <div className="mt-4 sm:mt-6 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg shadow-lg p-4 sm:p-6 text-white text-center">
                                <Trophy className="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4" />
                                <h2 className="text-2xl sm:text-3xl font-bold mb-2">Congratulations!</h2>
                                <p className="text-base sm:text-xl">
                                    You've completed the CFR.org scavenger hunt and earned all {maxPoints} points!
                                </p>
                                <p className="mt-2 text-sm sm:text-base">
                                    You're now familiar with the Council on Foreign Relations' website and ready to explore global affairs!
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ScavengerHunt />, document.getElementById('root'));
    </script>
</body>
</html>
